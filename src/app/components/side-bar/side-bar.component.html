<div class="accordion" id="sidebarAccordion">

  <!-- Genres -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingGenres">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGenres">
        Genres
      </button>
    </h2>
    <div id="collapseGenres" class="accordion-collapse collapse show" aria-labelledby="headingGenres" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body">
        <div *ngFor="let genre of genres()" class="form-check">
          <input class="form-check-input" type="checkbox"
                 [id]="'genre-' + genre"
                 [checked]="selectedGenres().includes(genre)"
                 (change)="toggleGenre(genre)">
          <label class="form-check-label" [for]="'genre-' + genre">{{ genre }}</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Catégories -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingCategories">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCategories">
        Catégories
      </button>
    </h2>
    <div id="collapseCategories" class="accordion-collapse collapse" aria-labelledby="headingCategories" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body">
        <div *ngFor="let category of categories()" class="form-check">
          <input class="form-check-input" type="checkbox"
                 [id]="'category-' + category"
                 [checked]="selectedCategories().includes(category)"
                 (change)="toggleCategory(category)">
          <label class="form-check-label" [for]="'category-' + category">{{ category }}</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Formes -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingFormes">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFormes">
        Formes
      </button>
    </h2>
    <div id="collapseFormes" class="accordion-collapse collapse" aria-labelledby="headingFormes" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body">
        <div *ngFor="let forme of formes()" class="form-check">
          <input class="form-check-input" type="checkbox"
                 [id]="'forme-' + forme"
                 [checked]="selectedFormes().includes(forme)"
                 (change)="toggleForme(forme)">
          <label class="form-check-label" [for]="'forme-' + forme">{{ forme }}</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Matières -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingMatieres">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMatieres">
        Matières
      </button>
    </h2>
    <div id="collapseMatieres" class="accordion-collapse collapse" aria-labelledby="headingMatieres" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body">
        <div *ngFor="let matiere of matieres()" class="form-check">
          <input class="form-check-input" type="checkbox"
                 [id]="'matiere-' + matiere"
                 [checked]="selectedMatieres().includes(matiere)"
                 (change)="toggleMatiere(matiere)">
          <label class="form-check-label" [for]="'matiere-' + matiere">{{ matiere }}</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Montages -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingMontages">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMontages">
        Montages
      </button>
    </h2>
    <div id="collapseMontages" class="accordion-collapse collapse" aria-labelledby="headingMontages" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body">
        <div *ngFor="let montage of montages()" class="form-check">
          <input class="form-check-input" type="checkbox"
                 [id]="'montage-' + montage"
                 [checked]="selectedMontages().includes(montage)"
                 (change)="toggleMontage(montage)">
          <label class="form-check-label" [for]="'montage-' + montage">{{ montage }}</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Couleurs -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingCouleurs">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCouleurs">
        Couleurs
      </button>
    </h2>
    <div id="collapseCouleurs" class="accordion-collapse collapse" aria-labelledby="headingCouleurs" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body d-flex flex-wrap gap-2">
        <label *ngFor="let couleur of couleurs()" [attr.for]="'couleur-' + couleur"
               class="color-palette-item"
               [title]="couleur">
          <input type="checkbox"
                 [id]="'couleur-' + couleur"
                 [checked]="selectedCouleurs().includes(couleur)"
                 (change)="toggleCouleur(couleur)"
                 hidden />
          <span class="color-swatch" [style.background-color]="couleurToCssMap[couleur] || 'transparent'"></span>
        </label>
      </div>
    </div>
  </div>

  <!-- Marques -->
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingMarques">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMarques">
        Marques
      </button>
    </h2>
    <div id="collapseMarques" class="accordion-collapse collapse" aria-labelledby="headingMarques" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body" style="max-height: 250px; overflow-y: auto;">
        <div *ngFor="let marque of marques()" class="form-check">
        <input class="form-check-input" type="checkbox"
       [id]="'marque-' + marque.id"
       [checked]="isMarqueSelected(marque)"
       (change)="toggleMarque(marque)">

        <label class="form-check-label" [for]="'marque-' + marque.id">{{ marque.name }}</label>
      </div>
      </div>
    </div>
  </div>

</div>
